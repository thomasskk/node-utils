import*as t from"htmlparser2";const r="_parent",e=t=>{const r=t.trim(),e=r.toLowerCase();return"true"===e||"false"!==e&&r},n=n=>{let o={},s="";const a=new t.Parser({onopentag:(t,n)=>{const a=(t=>{const r={};for(const n of Object.keys(t))r[n]=e(t[n]?.trim());return r})(n);s=t;const c=Object.keys(a).length>0,i=c?a:{};o[t]?(Array.isArray(o[t])||(o[t]=[o[t]]),c&&o[t].push(i)):o[t]=i,i[r]=o,o=i},ontext:t=>{if(0===Object.keys(o).length)return;if(!t.trim())return;const n=e(t),a="boolean"==typeof n?n:(t=>t.split("\n").map((t=>t.trim())).join(""))(t),c=o[r];Object.keys(c[s]).length>1&&!Array.isArray(c[s])&&(c[s]=[o]),Array.isArray(c[s])?c[s].push(a):c[s]=a},onclosetag:()=>{const t=o[r];delete o[r],o=t}},{xmlMode:!0});return a.write(n),a.end(),o};export{n as xml2js};
